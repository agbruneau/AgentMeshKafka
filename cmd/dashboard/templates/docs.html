{{template "base" .}}

{{define "content"}}
<h1>Documentation</h1>

<div class="grid grid-3 mb-3">
    <div class="card">
        <div class="card-header">
            <span class="card-title">ğŸ“š Patrons EDA</span>
        </div>
        <ul style="list-style: none; padding: 0;">
            <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
                <a href="#pub-sub" style="color: var(--text); text-decoration: none;">
                    <strong>1. Pub/Sub</strong>
                    <div style="color: var(--text-light); font-size: 0.875rem;">Producteur/Consommateur</div>
                </a>
            </li>
            <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
                <a href="#event-sourcing" style="color: var(--text); text-decoration: none;">
                    <strong>2. Event Sourcing</strong>
                    <div style="color: var(--text-light); font-size: 0.875rem;">Source d'Ã©vÃ©nements</div>
                </a>
            </li>
            <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
                <a href="#cqrs" style="color: var(--text); text-decoration: none;">
                    <strong>3. CQRS</strong>
                    <div style="color: var(--text-light); font-size: 0.875rem;">SÃ©paration lecture/Ã©criture</div>
                </a>
            </li>
            <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
                <a href="#saga" style="color: var(--text); text-decoration: none;">
                    <strong>4. Saga Choreography</strong>
                    <div style="color: var(--text-light); font-size: 0.875rem;">Transactions distribuÃ©es</div>
                </a>
            </li>
            <li style="padding: 0.5rem 0;">
                <a href="#dlq" style="color: var(--text); text-decoration: none;">
                    <strong>5. Dead Letter Queue</strong>
                    <div style="color: var(--text-light); font-size: 0.875rem;">Gestion des erreurs</div>
                </a>
            </li>
        </ul>
    </div>

    <div class="card">
        <div class="card-header">
            <span class="card-title">ğŸ”§ API Services</span>
        </div>
        <ul style="list-style: none; padding: 0;">
            <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
                <strong>Quotation</strong>
                <div style="font-family: monospace; font-size: 0.875rem; color: var(--text-light);">
                    POST /api/v1/devis<br>
                    GET /api/v1/devis<br>
                    GET /api/v1/devis/:id
                </div>
            </li>
            <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
                <strong>Souscription</strong>
                <div style="font-family: monospace; font-size: 0.875rem; color: var(--text-light);">
                    GET /api/v1/contrats<br>
                    PUT /api/v1/contrats/:id<br>
                    DELETE /api/v1/contrats/:id
                </div>
            </li>
            <li style="padding: 0.5rem 0;">
                <strong>RÃ©clamation</strong>
                <div style="font-family: monospace; font-size: 0.875rem; color: var(--text-light);">
                    POST /api/v1/sinistres<br>
                    GET /api/v1/sinistres<br>
                    POST /api/v1/sinistres/:id/evaluer
                </div>
            </li>
        </ul>
    </div>

    <div class="card">
        <div class="card-header">
            <span class="card-title">ğŸ“Š Topics Kafka</span>
        </div>
        <ul style="list-style: none; padding: 0; font-family: monospace; font-size: 0.875rem;">
            <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
                <span class="badge badge-info">quotation</span>
                <div>quotation.devis-genere</div>
                <div>quotation.devis-expire</div>
            </li>
            <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
                <span class="badge badge-success">souscription</span>
                <div>souscription.contrat-emis</div>
                <div>souscription.contrat-modifie</div>
                <div>souscription.contrat-resilie</div>
            </li>
            <li style="padding: 0.5rem 0;">
                <span class="badge badge-warning">reclamation</span>
                <div>reclamation.sinistre-declare</div>
                <div>reclamation.sinistre-evalue</div>
                <div>reclamation.indemnisation-effectuee</div>
            </li>
        </ul>
    </div>
</div>

<!-- Patron Pub/Sub -->
<div class="card" id="pub-sub">
    <div class="card-header">
        <span class="card-title">1. Patron Producteur/Consommateur (Pub/Sub)</span>
    </div>
    <div style="padding: 1rem 0;">
        <h3 style="margin-bottom: 1rem;">Principes</h3>
        <ul>
            <li><strong>DÃ©couplage</strong> : Le producteur ne connaÃ®t pas les consommateurs</li>
            <li><strong>Asynchrone</strong> : Les messages sont traitÃ©s de maniÃ¨re asynchrone</li>
            <li><strong>Persistance</strong> : Les messages sont stockÃ©s et peuvent Ãªtre rejouÃ©s</li>
        </ul>

        <h3 style="margin: 1.5rem 0 1rem;">Architecture</h3>
        <pre style="background: var(--bg); padding: 1rem; border-radius: 0.5rem; overflow-x: auto;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PRODUCTEUR  â”‚â”€â”€â”€â”€â–¶â”‚         TOPIC               â”‚â”€â”€â”€â”€â–¶â”‚ CONSOMMATEUR â”‚
â”‚  (Quotation) â”‚     â”‚  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”      â”‚     â”‚(Souscription)â”‚
â”‚              â”‚     â”‚  â”‚ P0â”‚ P1â”‚ P2â”‚...â”‚ Pnâ”‚      â”‚     â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜      â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        </pre>

        <h3 style="margin: 1.5rem 0 1rem;">Dans kafka-eda-lab</h3>
        <ul>
            <li><strong>Quotation</strong> produit DevisGenere â†’ <strong>Souscription</strong> consomme</li>
            <li><strong>Souscription</strong> produit ContratEmis â†’ <strong>RÃ©clamation</strong> consomme</li>
        </ul>
    </div>
</div>

<!-- Autres patrons -->
<div class="card" id="event-sourcing">
    <div class="card-header">
        <span class="card-title">2. Event Sourcing</span>
        <span class="badge badge-warning">Phase 3</span>
    </div>
    <p>L'Event Sourcing consiste Ã  stocker l'Ã©tat d'une entitÃ© sous forme d'une sÃ©quence d'Ã©vÃ©nements plutÃ´t que son Ã©tat actuel. Sera implÃ©mentÃ© dans la Phase 3.</p>
</div>

<div class="card" id="cqrs">
    <div class="card-header">
        <span class="card-title">3. CQRS (Command Query Responsibility Segregation)</span>
        <span class="badge badge-warning">Phase 4</span>
    </div>
    <p>CQRS sÃ©pare les opÃ©rations de lecture (Query) des opÃ©rations d'Ã©criture (Command) en utilisant des modÃ¨les de donnÃ©es distincts. Sera implÃ©mentÃ© dans la Phase 4.</p>
</div>

<div class="card" id="saga">
    <div class="card-header">
        <span class="card-title">4. Saga Choreography</span>
        <span class="badge badge-warning">Phase 5</span>
    </div>
    <p>Les Sagas permettent de gÃ©rer des transactions distribuÃ©es Ã  travers plusieurs services via une chorÃ©graphie d'Ã©vÃ©nements. Sera implÃ©mentÃ© dans la Phase 5.</p>
</div>

<div class="card" id="dlq">
    <div class="card-header">
        <span class="card-title">5. Dead Letter Queue</span>
        <span class="badge badge-warning">Phase 6</span>
    </div>
    <p>Les Dead Letter Queues permettent de capturer les messages qui n'ont pas pu Ãªtre traitÃ©s pour analyse et retraitement. Sera implÃ©mentÃ© dans la Phase 6.</p>
</div>
{{end}}
